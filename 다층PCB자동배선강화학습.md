
# ✅ 다층 PCB 자동 배선을 위한 강화학습 기반 실시간 Auto-Routing 요약

## 1. 목적
- 다층 PCB 보드에서 실시간 자동 라우팅을 수행하는 **딥러닝 기반 강화학습(RL) 기법** 탐색
- **KiCAD** 툴에 통합 가능한 **확장/플러그인** 형태로의 적용 가능성 검토

---

## 2. 적합한 딥러닝 구조

| 접근 방식 | 장점 | 주요 사례 |
|-----------|------|------------|
| **DQN 계열** (Double DQN, Dueling DQN 등) | 샘플 효율 높고 실시간 추론 빠름 | Liao et al. DQN Global Router |
| **PPO** | 안정성, 빠른 수렴, MCTS 결합 가능 | MCTS+PPO Hybrid (Bao et al.) |
| **A3C** | 멀티스레딩 기반 병렬 학습, 실시간 적응 유리 | AutoRoute-GNN |
| **GNN/CNN 기반 DRL** | 일반화 성능, 공간 구조 인식 | FanoutNet, DeepPCB |
| **Hybrid** (RL + 전통 알고리즘) | 속도와 품질의 균형 | Quilter, PPO + A* 구조 등 |

---

## 3. 실시간성과 성능 보장 전략

- **모델 경량화**: DQN 등에서 Q-network를 작게 설계 (은닉층 3개, 작은 벡터)
- **보상 설계 최적화**: 배선 길이, 비아 수, 연결 성공률, 전역적인 배선 용이성 고려
- **탐색 효율화**: MCTS, 휴리스틱과 RL 정책 결합
- **사전 학습 정책 사용**: On-demand로 추론 시간 단축
- **병렬 실행**: A3C 방식으로 학습 속도 및 대응 속도 향상

---

## 4. KiCAD 통합 방안

| 방법 | 설명 | 특징 |
|------|------|------|
| **(a) DSN/SES 파일 방식** | KiCAD 내보내기/가져오기 활용 | 구현 쉬움, DeepPCB 등 활용 |
| **(b) Python API 기반 플러그인** | 배선/비아 조작 실시간 적용 | 상호작용 가능, 실시간 제어 |
| **(c) Headless CLI 연동** | KiCAD를 서버처럼 외부 제어 | 고성능 서버 기반 배치 처리에 적합 |

---

## 5. 강화학습 환경 설계

- **상태(state)**: 핀 간 거리, 장애물, 층 정보 등 벡터 or 이미지 기반
- **행동(action)**: 6방향 (상하좌우 + 위/아래층), 배선 종료
- **보상(reward)**: 연결 성공 +, 경로 연장/충돌/비아 사용 –
- **멀티-net 처리**: 핀쌍 분해 or 스테이너 트리 기반

---

## 6. 데이터셋 및 시뮬레이터

- 오픈소스 데이터셋: FanoutNet 벤치마크(bm1~bm11), DQN Router 환경, Quilter community DB
- 시뮬레이션 환경: He et al. 강화학습 환경, JSON 기반 설계 추출, FreeRouting으로 성능 비교

---

## 7. 관련 프로젝트 요약

| 프로젝트 | 방식 | 특징 |
|----------|------|------|
| **DQN Global Router** | Double DQN | Q-학습 기반, 빠른 추론 |
| **MCTS+PPO Hybrid** | 강화학습 + 탐색 | 100% 성공률, 복잡 문제 해결 |
| **FanoutNet** | CNN + DDPG | BGA 팬아웃 자동화, via 감소 |
| **DeepPCB** | 클라우드 RL | 반복 개선, KiCAD 연동 |
| **Quilter** | RL + 물리 시뮬 | SI/PI 고려, 전자동 설계 지향 |

---

## ✅ 결론 요약

- **PPO, DQN, GNN 기반 모델**이 실시간성과 성능을 동시에 확보하는 데 유망
- **KiCAD 통합**은 DSN 방식으로 빠르게 시작하고, 향후 플러그인 확장 가능
- 공개 데이터셋과 시뮬레이터 존재 → 학습/평가 용이
- 상용화 가능성을 입증한 사례들도 등장 중 (Quilter, DeepPCB 등)
